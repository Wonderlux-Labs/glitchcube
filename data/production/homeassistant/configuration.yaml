# Glitch Cube Home Assistant Configuration
# Main configuration file for the art installation

# Basic configuration
homeassistant:
  name: "Glitch Cube"
  latitude: 40.7682435937 
  longitude: -119.218725792
  elevation: 3848
  unit_system: imperial
  temperature_unit: F
  time_zone: "America/Los_Angeles"
  country: US
  currency: USD
  
  # Allow external webhooks for art installation
  external_url: "https://zjd6lgd6yhigawnj06mkguhholcsfdul.ui.nabu.casa"
  internal_url: "http://glitchcube.local:8123"

# Enable frontend and API
frontend:
  themes: !include_dir_merge_named themes

# Enable configuration panel
config:

# Enable logbook for tracking interactions
logbook:
  include:
    domains:
      - glitchcube
      - sensor
      - automation
  exclude:
    entities:
      - sensor.system_temperature  # Too frequent for logbook

# Enable history tracking
history:
  include:
    domains:
      - sensor
      - input_datetime
      - input_text
  exclude:
    entities:
      - sensor.system_temperature  # High frequency sensor

# Enable recorder with optimized settings for art installation
recorder:
  db_url: sqlite:////config/home-assistant_v2.db
  purge_keep_days: 30  # Keep 30 days of history
  commit_interval: 5   # Commit every 5 seconds for reliability
  include:
    domains:
      - sensor
      - automation
      - input_datetime
      - input_text
      - logbook
    entities:
      - sensor.glitch_cube_app_health
      - sensor.internet_connectivity
      - sensor.installation_health
      - sensor.last_interaction_time
      - sensor.current_persona

# HTTP configuration for webhooks
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - 192.168.0.0/16
    - 172.16.0.0/12
    - 10.0.0.0/8

# Network discovery
discovery:

# Enable mobile app support
mobile_app:

# Enable system health
system_health:

# Enable diagnostics
diagnostics:

# Include separate configuration files
automation: !include automations.yaml
script: !include scripts.yaml

# Include all input helpers (input_datetime, input_text, input_number, input_boolean)
<<: !include helpers.yaml

# Include all sensors (REST sensors and template sensors)
sensor: !include sensors.yaml

# Enable webhook integration (for external API calls)
webhook:

# Enable RESTful API
api:

# Scene configuration for different installation modes
scene: !include scenes.yaml