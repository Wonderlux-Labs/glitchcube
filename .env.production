# Production Environment Configuration
# This file is loaded when RACK_ENV=production

# Environment
RACK_ENV=production
APP_ENV=production
PORT=4567

# Database Configuration - ensures correct production database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=glitchcube_production
# Can override with DATABASE_URL if needed
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/glitchcube_production
DB_POOL_SIZE=5

# Redis Configuration
REDIS_URL=redis://localhost:6379/0

# Puma configuration - single mode for art installation
PUMA_WORKERS=0
PUMA_MIN_THREADS=1
PUMA_MAX_THREADS=5

# Production Features
SIMULATE_CUBE_MOVEMENT=false
LOG_LEVEL=info
ENABLE_SELF_HEALING=true           # Master switch
SELF_HEALING_DRY_RUN=true          # Safe mode - only propose, don't apply
SELF_HEALING_MIN_CONFIDENCE=0.85   # Minimum AI confidence to propose fix
SELF_HEALING_ERROR_THRESHOLD=3     # Errors must occur 3+ times

# Bind to all interfaces for production
BIND_ALL=true